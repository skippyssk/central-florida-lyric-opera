<div class="home-container">
  <div class="global-page-overlay"></div>

  <div class="fixed-logo">
    <img src="assets/images/Logo.webp" alt="Central Florida Lyric Opera Logo" />
  </div>

  <button
    class="fixed-email-button pulse-animation"
    (click)="showEmailSignup()"
  >
    Join Email List
  </button>

  <div class="desktop-view" *ngIf="!isMobile">
    <div
      class="banner-scroll-container"
      [style.height.vh]="bannerContainerHeightVh"
    >
      <div
        *ngFor="let show of mainShows; let i = index"
        class="banner-section"
        [id]="'banner-show-' + i"
        [attr.aria-label]="'Banner section for ' + show.title"
        role="region"
      >
        <div
          class="banner-image-content"
          [style.backgroundImage]="'url(' + show.image + ')'"
          [attr.data-image]="show.image"
        ></div>
      </div>
    </div>

    <div
      id="desktopOverlay"
      class="show-overlay"
      [style.opacity]="overlayOpacity"
      [style.transform]="overlayTransform"
    >
      <div
        class="overlay-content-wrapper"
        *ngIf="currentShow"
        @contentFade
        aria-live="polite"
      >
        <div class="overlay-content">
          <h2 id="overlayTitle">{{ currentShow.title }}</h2>
          <p id="overlayDateVenue">
            {{ currentShow.date }}
            {{ currentShow.time ? " - " + currentShow.time : "" }} |
            {{ currentShow.venue }}
          </p>
          <p id="overlayDescription" class="long-description">
            {{ currentShow.description }}
          </p>
          <div class="overlay-buttons">
            <button
              id="overlayButton"
              class="overlay-ticket-button"
              (click)="handleTicketButtonClick(currentShow)"
            >
              {{
                currentShow.buttonText ??
                  (currentShow.available ? "Buy Tickets" : "Unavailable")
              }}
            </button>
            <button class="overlay-email-button" (click)="showEmailSignup()">
              Join Email List
            </button>
            <button class="overlay-donate-button" (click)="donateViaPaypal()">
              Donate Now
            </button>
          </div>
        </div>
      </div>
      <!-- Navigation dots removed for single banner -->
    </div>

    <div class="lesser-shows-section">
      <h2>Events</h2>
      <div class="show-list-grid">
        <div *ngFor="let show of lesserShows" class="show-list-card">
          <img [src]="show.image" [alt]="show.title + ' image'" />
          <div class="show-list-info">
            <h3>{{ show.title }}</h3>
            <p>{{ show.date }}<span *ngIf="show.time"> - {{ show.time }}</span> | {{ show.venue }}</p>
            <p class="show-list-description">{{ show.description }}</p>
            <button (click)="handleTicketButtonClick(show)" [disabled]="!show.available && !show.buttonText">
              {{ show.buttonText ?? (show.available ? 'Learn More' : 'Unavailable') }}
            </button>
          </div>
        </div>
      </div>
    </div>

    <div class="OCShows-section">
      <h2>Member Only Shows</h2>
      <div class="show-list-oc">
        <div *ngFor="let show of OCShows" class="show-list-card oc-card">
          <img [src]="show.image" [alt]="show.title + ' image'" />
          <div class="show-list-info oc-info">
            <h3>{{ show.title }}</h3>
            <p>{{ show.date }}<span *ngIf="show.time"> - {{ show.time }}</span> | {{ show.venue }}</p>
            <p class="show-list-description">{{ show.description }}</p>
            <button (click)="handleTicketButtonClick(show)" [disabled]="!show.available && !show.buttonText">
              {{ show.buttonText ?? (show.available ? 'Learn More' : 'Unavailable') }}
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="mobile-view" *ngIf="isMobile">
    <h2>Upcoming Performances</h2>
    <div class="show-list-mobile">
      <div *ngFor="let show of mainShows" class="show-list-card">
        <img [src]="show.image" [alt]="show.title + ' image'" />
        <div class="show-list-info">
          <h3>{{ show.title }}</h3>
          <p>{{ show.date }}<span *ngIf="show.time"> - {{ show.time }}</span> | {{ show.venue }}</p>
          <p class="show-list-description">{{ show.description }}</p>
          <button (click)="handleTicketButtonClick(show)" [disabled]="!show.available && !show.buttonText">
            {{ show.buttonText ?? (show.available ? 'Buy Tickets' : 'Unavailable') }}
          </button>
        </div>
      </div>
    </div>

    <h2>Events</h2>
    <div class="show-list-mobile">
      <div *ngFor="let show of filteredLesserShows" class="show-list-card">
        <img [src]="show.image" [alt]="show.title + ' image'" />
        <div class="show-list-info">
          <h3>{{ show.title }}</h3>
          <p>{{ show.date }}<span *ngIf="show.time"> - {{ show.time }}</span> | {{ show.venue }}</p>
          <p class="show-list-description">{{ show.description }}</p>
          <button (click)="handleTicketButtonClick(show)" [disabled]="!show.available && !show.buttonText">
            {{ show.buttonText ?? (show.available ? 'Learn More' : 'Unavailable') }}
          </button>
        </div>
      </div>
    </div>

    <h2>Member Only Shows</h2>
    <div class="show-list-mobile">
      <div *ngFor="let show of OCShows" class="show-list-card oc-card">
        <img [src]="show.image" [alt]="show.title + ' image'" />
        <div class="show-list-info oc-info">
          <h3>{{ show.title }}</h3>
          <p>{{ show.date }}<span *ngIf="show.time"> - {{ show.time }}</span> | {{ show.venue }}</p>
          <p class="show-list-description">{{ show.description }}</p>
          <button (click)="handleTicketButtonClick(show)" [disabled]="!show.available && !show.buttonText">
            {{ show.buttonText ?? (show.available ? 'Learn More' : 'Unavailable') }}
          </button>
        </div>
      </div>
    </div>
  </div>

  <div *ngIf="showMessageBox" class="message-box-container fade-in">
    <div class="message-box-content">
      <p>{{ messageBoxText }}</p>
      <button
        (click)="closeMessageBox()"
        class="close-message-button"
        aria-label="Close message"
      >
        &times;
      </button>
    </div>
  </div>

  <div *ngIf="showInnerCircleModal" class="modal-container fade-in">
    <div class="inner-circle-modal modal-content">
      <button
        (click)="closeInnerCircleModal()"
        class="close-modal-button"
        aria-label="Close"
      >
        &times;
      </button>
      <h2>Maestro's Inner Circle</h2>
      <p *ngIf="!currentTicketLink">
        Tickets are coming soon, join Maestro's Inner Circle for deals and info
        about upcoming shows.
      </p>
      <p *ngIf="currentTicketLink">
        Gain exclusive access and benefits by joining the Maestro's Inner
        Circle, or proceed with your current selection.
      </p>
      <div class="modal-buttons">
        <button
          *ngIf="currentTicketLink"
          class="modal-button primary"
          (click)="proceedWithAction()"
        >
          Proceed
        </button>
        <button class="modal-button secondary" (click)="joinInnerCircle()">
          Join Maestro's Inner Circle
        </button>
      </div>
    </div>
  </div>
</div>
